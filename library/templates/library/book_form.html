<!DOCTYPE html>
<html>
<head>
    <title>{% if form.instance.pk %}Редактировать{% else %}Добавить{% endif %} книгу</title>
    <style>
        .form-group {
            margin: 15px 0;
        }
        label {
            display: block;
            font-weight: bold;
            margin-bottom: 5px;
        }
        input[type="text"], 
        input[type="number"],
        textarea,
        select {
            padding: 8px;
            border: 1px solid #ccc;
            border-radius: 4px;
            width: 100%;
            max-width: 400px;
            font-size: 14px;
        }
        .btn {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
        }
        .btn:hover {
            background-color: #0056b3;
        }
        .error {
            color: red;
            font-size: 12px;
        }
    </style>
</head>
<body>
    <h1>{% if form.instance.pk %}Редактировать{% else %}Добавить{% endif %} книгу</h1>
    
    {% if author %}
        <p><strong>Добавляется книга автора:</strong> {{ author.full_name }}</p>
    {% endif %}
    
    <form method="post" enctype="multipart/form-data">
        {% csrf_token %}
        
        <!-- Отображение ошибок формы -->
        {% if form.errors %}
            <div class="error">
                <p>Пожалуйста, исправьте ошибки:</p>
                <ul>
                    {% for field in form %}
                        {% for error in field.errors %}
                            <li>{{ field.label }}: {{ error }}</li>
                        {% endfor %}
                    {% endfor %}
                    {% for error in form.non_field_errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            </div>
        {% endif %}
        
        <!-- Поля формы -->
        <div class="form-group">
            <label for="{{ form.title.id_for_label }}">{{ form.title.label }}</label>
            {{ form.title }}
            {% if form.title.errors %}
                <div class="error">{{ form.title.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.isbn.id_for_label }}">{{ form.isbn.label }}</label>
            {{ form.isbn }}
            {% if form.isbn.errors %}
                <div class="error">{{ form.isbn.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.authors.id_for_label }}">{{ form.authors.label }}</label>
            {{ form.authors }}
            {% if form.authors.errors %}
                <div class="error">{{ form.authors.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.publisher.id_for_label }}">{{ form.publisher.label }}</label>
            {{ form.publisher }}
            {% if form.publisher.errors %}
                <div class="error">{{ form.publisher.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.genres.id_for_label }}">{{ form.genres.label }}</label>
            {{ form.genres }}
            {% if form.genres.errors %}
                <div class="error">{{ form.genres.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.publication_year.id_for_label }}">{{ form.publication_year.label }}</label>
            {{ form.publication_year }}
            {% if form.publication_year.errors %}
                <div class="error">{{ form.publication_year.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.description.id_for_label }}">{{ form.description.label }}</label>
            {{ form.description }}
            {% if form.description.errors %}
                <div class="error">{{ form.description.errors }}</div>
            {% endif %}
        </div>
        
        <div class="form-group">
            <label for="{{ form.cover.id_for_label }}">{{ form.cover.label }}</label>
            {{ form.cover }}
            {% if form.cover.errors %}
                <div class="error">{{ form.cover.errors }}</div>
            {% endif %}
        </div>
        
        <button type="submit" class="btn">Сохранить</button>
    </form>
    
    <br>
    <a href="{% url 'library:book_list' %}">← Назад к списку книг</a>
</body>
</html>